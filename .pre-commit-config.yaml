# Pre-commit hooks configuration
# Install: pre-commit install
# Run manually: pre-commit run --all-files
# Update hooks: pre-commit autoupdate

repos:
  # General file checks
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v6.0.0
  hooks:
  - id: trailing-whitespace
    args: [--markdown-linebreak-ext=md]
  - id: end-of-file-fixer
  - id: check-yaml
    args: [--allow-multiple-documents]
  - id: check-json
  - id: check-toml
  - id: check-added-large-files
    args: [--maxkb=1000]
  - id: check-case-conflict
  - id: check-merge-conflict
  - id: detect-private-key
  - id: mixed-line-ending
    args: [--fix=lf]

  # Python code formatting
- repo: https://github.com/psf/black
  rev: 25.9.0
  hooks:
  - id: black
    language_version: python3.12
    args: [--line-length=100]

  # Import sorting
- repo: https://github.com/PyCQA/isort
  rev: 7.0.0
  hooks:
  - id: isort
    args: [--profile=black, --line-length=100]

  # Linting with Ruff (replaces flake8, pylint, etc.)
- repo: https://github.com/astral-sh/ruff-pre-commit
  rev: v0.14.4
  hooks:
  - id: ruff
    args: [--fix, --exit-non-zero-on-fix]
  - id: ruff-format

  # Type checking with MyPy
- repo: https://github.com/pre-commit/mirrors-mypy
  rev: v1.18.2
  hooks:
  - id: mypy
    additional_dependencies: [types-PyYAML]
    args: [--ignore-missing-imports, --no-strict-optional]
    exclude: ^tests/

  # Security scanning
- repo: https://github.com/PyCQA/bandit
  rev: 1.8.6
  hooks:
  - id: bandit
    args: [-r, src/, -f, screen]
    exclude: ^tests/|^docs/

  # Docstring checks
- repo: https://github.com/PyCQA/pydocstyle
  rev: 6.3.0
  hooks:
  - id: pydocstyle
    args: [--convention=google]
    exclude: ^tests/|^example\.py$

  # YAML formatting
- repo: https://github.com/macisamuele/language-formatters-pre-commit-hooks
  rev: v2.15.0
  hooks:
  - id: pretty-format-yaml
    args: [--autofix, --indent, '2']

  # Markdown formatting
- repo: https://github.com/executablebooks/mdformat
  rev: 1.0.0
  hooks:
  - id: mdformat
    additional_dependencies:
    - mdformat-gfm
    - mdformat-black
    args: [--wrap, '100']

  # Spell checking (optional - comment out if too strict)
  # - repo: https://github.com/codespell-project/codespell
  #   rev: v2.2.6
  #   hooks:
  #     - id: codespell
  #       args: [--ignore-words-list=crate,nd,nin,ths]

# Configuration for local checks
default_language_version:
  python: python3.12

# Skip certain files
exclude: |
  (?x)^(
      \.eggs/|
      \.git/|
      \.hg/|
      \.mypy_cache/|
      \.tox/|
      \.venv/|
      _build/|
      buck-out/|
      build/|
      dist/|
      data/|
      logs/|
      .*\.egg-info/
  )$

# Fail fast - stop after first failure
fail_fast: false

# Minimum pre-commit version
minimum_pre_commit_version: 3.0.0
